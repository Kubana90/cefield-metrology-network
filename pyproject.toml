[tool.ruff]
target-version = "py311"
line-length = 100

[tool.ruff.lint]
# E = pycodestyle errors, W = pycodestyle warnings, F = pyflakes
# I = isort, UP = pyupgrade, B = flake8-bugbear
select = ["E", "W", "F", "I", "UP", "B"]
ignore = [
    "E501",   # Line too long — handled by formatter
    "B008",   # Do not perform function call in default arguments (FastAPI Depends)
    "B904",   # Within except clauses (acceptable in API handlers)
    "UP007",  # Use X | Y for union types (Python 3.9 compat kept for clarity)
    "F401",   # Unused imports — some are conditional imports
]

[tool.ruff.lint.isort]
known-first-party = ["baseline", "normalizer", "pattern_classifier", "database"]

[tool.ruff.format]
quote-style = "double"
indent-style = "space"

[tool.pytest.ini_options]
testpaths = ["tests"]
asyncio_mode = "auto"
verbose = true
tb = "short"

[tool.coverage.run]
source = ["cloud-core"]
omit = ["cloud-core/migrations/*", "tests/*"]

[tool.coverage.report]
exclude_lines = [
    "pragma: no cover",
    "if __name__ == .__main__.:",
    "raise NotImplementedError",
]
