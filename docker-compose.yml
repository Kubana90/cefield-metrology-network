services:
  cloud-core:
    build: 
      context: ./cloud-core
      dockerfile: Dockerfile
    ports:
      - "8000:8000"
    environment:
      - POSTGRES_URL=postgresql://cefield:cefield@db:5432/genome
    depends_on:
      - db

  db:
    image: ankane/pgvector:latest
    environment:
      - POSTGRES_USER=cefield
      - POSTGRES_PASSWORD=cefield
      - POSTGRES_DB=genome
    ports:
      - "5432:5432"

  edge-node:
    build:
      context: ./edge-node
      dockerfile: Dockerfile
    depends_on:
      - cloud-core
